## [Git：もう怖くないGit！チーム開発で必要なGitを完全マスター.md](https://kakukakujp.udemy.com/course/unscared_git/learn/lecture/6680104#overview)

### Gitってなんのために使う？
- バージョン管理のため
- 誰かが上書きしたものを気づかずに上書きしようとすると、警告が出るようになる

### Gitの歴史
- リーナス・トーバルズ：　Linux（OS）を作った人
- Linuxカーネル開発で利用したバージョン管理システムが使えなくなり、Linux開発用のGit原型となるプログラムの開始

### Gitの仕組みと基本的なコマンド
#### 基本的な仕組み
-　Gitは差分ではなく、スナップショットを記録する
- スナップショット：　変更ないファイルは1つ前のバージョンを引き継ぎ、変更あったファイルも全て新しいバージョンに引き継ぐこと
- スナップショットだと、複数人開発に向いている（マージの際や元のデータに戻すことができるなど）

#### 操作の流れ
- ワークツリー（自分の手元の作業場）でファイルを変更し、そのスナップショットをローカルリポジトリに保存
- ** ローカルは3つのエリアに分かれている：ワークツリー、ステージ、リポジトリ **
- ①ワークツリー：　自分の手元でファイルを変更する作業場
- ②ステージ：　コミットする変更（スナップショットを記録する）を **準備する場 ** → git add
- ③リポジトリ： スナップショットを記録する→git commit

#### データの管理方法（イメージ）
- ステージに追加する時は、圧縮ファイルを作成する
- indexファイルに、圧縮ファイルはindex.htmlというファイル名だよ、とファイル構成を記録する
[![Image from Gyazo](https://i.gyazo.com/615dcecef7c2d9e01c1ef757da946811.png)](https://gyazo.com/615dcecef7c2d9e01c1ef757da946811)

-　リポジトリに圧縮ファイル、ツリー、コミットファイルを作成することでデータ保存してる
- ステージ追加時に圧縮ファイルが、コミットする時にツリーとコミットが作られる
- コミットが親コミットを持つことで、変更履歴を辿れる

-　Gitは差分ではなく、スナップショットを記録する
- スナップショット：　変更ないファイルは1つ前のバージョンを引き継ぎ、変更あったファイルも全て新しいバージョンに引き継ぐこと
- コマンドを闇雲に覚えるのではなく、このデータ構造に対してどういう操作をしているコマンドなのかということをイメージすること

#### Gitを始めよう
- Gitを始める際にはgit initwをローカルリポジトリで行う
- git initをすると、.gitディレクトリが作成される（Gitで必要なsものが全て含まれる）
- config：Gitの設定ファイル

- プロジェクトの場合、git cloneコマンドでローカルにコピーできる

#### 変更をステージに加える
- git addで、ワークツリーーから、ステージへ変更を追加する
- ステージはコミットを準備するための場所、一部の変更だけを記録するためにある！

#### 変更を記録する（コミット）
- git commit -m: エディターが立ち上がらずに、コミットメッセージ入力できる
- git commit -v: エディター上でファイル変更内容を確認できる

#### 現在の変更状況の確認
- git status: 前回ステージに追加して後に変更されたワークツリーのファイルを表示

#### 何を変更したか確認
-　git diff: git addする前の変更差分の確認
- git diff --staged: git addした後の変更分

#### 変更履歴の確認
- git lig
- git log --oneline: 1行で表示
- git log -p ファイル名：　ファイルの変更履歴確認
- git log -n コミット数：　表示するコミット数を制限

#### ファイルの削除を記録する
- git rm ファイル名orディレクトリ名：　コミット記録、ローカルのワークツリーからも消える
- git rm --cashed: リポジトリのみ削除、ローカルへは残したままにする

#### ファイル名の変更を記録する
- git mv 旧ファイル名　新ファイル名：　ファイル名を変更


#### GitHubにプッシュする
- 新規登録する場合：git remote add origin GithubURL
- originというショートカットでurlのリモートリポジトリを登録すると、今後はoriginという名前でGitHubリポジトリにアップしたり取得したりする
- git push origin master：リモートリポジトリへ送信
- git push -u origin master : -uは、初回につけておくと今後はgit push origin masterだけですむ

#### エイリアスの設定
- git config --global：PC全体で設定できる
- git config：設定のこと

#### バージョン管理したくないファイルの管理
- PWが載っているファイル、チーム開発に必要ないファイル
- .gitignoreファイルに記載


### 変更を元に戻す
#### ファイル変更を取り消す
- git checkout -- <ファイル名>、git checkout -- <　ディレクトリ名>でそれぞれの変更を取り消せる
- git ceckout -- . :全変更を取り消せる
- git checkout --.でステージの内容を、ワークツリーに反映している
https://www.atlassian.com/ja/git/tutorials/undoing-changes

- git checkout -- .は、現在のディレクトリ（.が現在のディレクトリを意味している）で行った変更を、最後にコミットした状態に戻すコマンド。
  つまり、最後のコミット以降に行った変更を取り消せるんだ。ただし、新しく追加したファイルには影響しないから注意が必要だよ。


#### ステージした変更を取り消す
- git addした内容が間違っていた場合、git reset HEAD <ファイル名orディレクトリ名>で変更可能
- 全変更を取り消す場合には、git reset HEAD.
- 上記のコマンドでは、ローカルの内容は変更されない
- ローカルの変更も取り消したい場合には、git checkout -- <ファイル名>で変更をなしにできる

#### 直前のコミットを修正する
- git commit --amend
- リモートリポジトリにpushしたコミットはやり直してはいけない！（チーム開発の場合、クローンした内容とamendした内容が一致しなくなってしまうため）


### GitHubとやりとりする
#### リモート情報の確認
- git remote：登録されているリモート名が確認できる
- git remote -v：対応するURLが表示される

#### リモートリポジトリの追加
- リモートリポジトリは複数登録できる
- git remote add リモート名　リモートURL

#### リモートから取得する（フェッチ編）
- git fetch リモート名：ローカルリポジトリに情報を取得する、ワークツリーには情報は反映されない
- git mergeでワークツリーへ反映する

#### リモートから取得する（プル編）
- リモ〜とから情報を取得して、一気にマージする
- git pullでも、git pull origin masterと同じ
- git pull origin master = git fetch origin master, git merge origin/masterの動作と同じ
＝　git pullすれば、リモートリポジトリの内容をローカルへ反映させて、ワークツリーにもその変更を一度にできる

#### フェッチとプルの使い分け
- フェッチが基本使うべき、プルは挙動が特殊
https://techmania.jp/blog/git0002/

#### リモート情報を詳しく知る
- git remote show リモート名

#### リモートを変更・削除
- git remote rename　旧リモート名　新リモート名
- git remote rm　リモート名


### ブランチとマージを使いこなす
#### ブランチって何？ 
- 並行して複数機能を開発するためにあるのがブランチ＝分岐して開発する＝他の人の影響を受けない

#### ブランチの仕組み
- コミットはスナップショット、時系列順位並ぶ
- コミットしたらブランチが指すコミットファイルが変わる＝最新のコミットファイルを指す
- HEAD:今自分が作業しているブランチを指し示す

#### 新しいブランチを作成
- git branch
- git branch - a：すべてのブランチを表示

#### ブランチを切り替える
- git checkout
- git checkout -b：bはbranchの略

#### 変更をマージ
- マージ：他の人の変更内容を取り込むこと
- ローカルファイルの変更状況によって、マージは３種類に分けられる
①Fast　Foward　：早送りになるマージ（＝ブランチが枝分かれしなかった時は、ブランチのポインタを前に進めるだけ）
②Auto Merge：基本的なマージ（＝枝分かれして開発していた場合、マージコミットという新しいコミット作る）
https://www.atlassian.com/ja/git/tutorials/using-branches/git-merge

#### コンフリクトを解決する
③コンフリクト
- 同じファイルの同じ行に対して、異なる編集を行った時
- どのファリルでコンフリクトが起きているか？：git status

#### コンフリクトを起こさないためには
- コンフリクト関連おじこが起きにくい運用ルール
①複数人で同じファイルを変更しない
②pullやmergeする前に変更中の状態を無くしておく（commitやstashすること）
- stash：変更内容を一時保管すること
③pullする時は、pullするブランチに移動してからpullする
- masterブランチでpullしたいのに、featureブランチのままpull　してしまうと、featureブランチの方にmergeされてしまうため！
- コンフリクトしても慌てないこと
